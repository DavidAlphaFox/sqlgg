#! /bin/bash

set -e -u

../sqlgg.byte -gen cxx test.sql > test_cxx_gen.hpp
g++ -g -o test_cxx test_cxx.cpp -lsqlite3

../sqlgg.byte -gen caml test.sql > test_caml_gen.ml
ocamlc -w Alse -g -o test_caml -I ../impl -I +sqlite3 sqlite3.cma ../impl/sqlgg_sqlite3.ml ../impl/sqlgg_traits.ml test_caml_gen.ml test_caml.ml
